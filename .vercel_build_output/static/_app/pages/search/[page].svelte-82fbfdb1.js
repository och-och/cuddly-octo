import{S as s,i as t,s as e,p as n,q as r,r as a,w as l,x as o,y as c,e as i,j as u,c as f,a as h,l as p,d as m,o as g,f as $,g as d,I as v,C as k,D as y,L as b,B as q,M as w,N as x,O as E,t as z,b as P,n as S,h as j,P as I}from"../../chunks/vendor-c4d175b0.js";import{S as C,s as D}from"../../chunks/api-8633b337.js";import{S as M}from"../../chunks/Search-b66ffe5c.js";import"../../chunks/singletons-6b53f818.js";function A(s){let t,e;return t=new C({}),{c(){n(t.$$.fragment)},l(s){r(t.$$.fragment,s)},m(s,n){a(t,s,n),e=!0},i(s){e||(l(t.$$.fragment,s),e=!0)},o(s){o(t.$$.fragment,s),e=!1},d(s){c(t,s)}}}function B(s){let t,e,n,r,a,c,b,q,w=s[1]&&A();return{c(){t=i("a"),w&&w.c(),e=u(),n=i("img"),this.h()},l(s){t=f(s,"A",{href:!0,class:!0});var r=h(t);w&&w.l(r),e=p(r),n=f(r,"IMG",{src:!0,alt:!0,class:!0}),r.forEach(m),this.h()},h(){n.src!==(r=s[0].preview)&&g(n,"src",r),g(n,"alt",""),g(n,"class","svelte-1khmcnq"),g(t,"href",a=`/post/${s[0].md5}`),g(t,"class","svelte-1khmcnq")},m(r,a){$(r,t,a),w&&w.m(t,null),d(t,e),d(t,n),c=!0,b||(q=v(n,"load",s[2]),b=!0)},p(s,[i]){s[1]?w?2&i&&l(w,1):(w=A(),w.c(),l(w,1),w.m(t,e)):w&&(k(),o(w,1,1,(()=>{w=null})),y()),(!c||1&i&&n.src!==(r=s[0].preview))&&g(n,"src",r),(!c||1&i&&a!==(a=`/post/${s[0].md5}`))&&g(t,"href",a)},i(s){c||(l(w),c=!0)},o(s){o(w),c=!1},d(s){s&&m(t),w&&w.d(),b=!1,q()}}}function N(s,t,e){let{post:n}=t,r=!0;return s.$$set=s=>{"post"in s&&e(0,n=s.post)},[n,r,()=>e(1,r=!1)]}class V extends s{constructor(s){super(),t(this,s,N,B,e,{post:0})}}function G(s,t,e){const n=s.slice();return n[4]=t[e],n}function L(s){let t,e;return{c(){t=i("p"),e=z("Can't load, sorry :("),this.h()},l(s){t=f(s,"P",{class:!0});var n=h(t);e=P(n,"Can't load, sorry :("),n.forEach(m),this.h()},h(){g(t,"class","info svelte-1s1s01z")},m(s,n){$(s,t,n),d(t,e)},p:S,i:S,o:S,d(s){s&&m(t)}}}function O(s){let t,e,n,r,a,c,v,b=s[1].total+"",q=s[1].results,w=[];for(let l=0;l<q.length;l+=1)w[l]=F(G(s,q,l));const x=s=>o(w[s],1,1,(()=>{w[s]=null}));return{c(){t=i("p"),e=z("found "),n=z(b),r=z(" posts"),a=u(),c=i("div");for(let s=0;s<w.length;s+=1)w[s].c();this.h()},l(s){t=f(s,"P",{class:!0});var l=h(t);e=P(l,"found "),n=P(l,b),r=P(l," posts"),l.forEach(m),a=p(s),c=f(s,"DIV",{class:!0});var o=h(c);for(let t=0;t<w.length;t+=1)w[t].l(o);o.forEach(m),this.h()},h(){g(t,"class","info svelte-1s1s01z"),g(c,"class","posts svelte-1s1s01z")},m(s,l){$(s,t,l),d(t,e),d(t,n),d(t,r),$(s,a,l),$(s,c,l);for(let t=0;t<w.length;t+=1)w[t].m(c,null);v=!0},p(s,t){if((!v||2&t)&&b!==(b=s[1].total+"")&&j(n,b),2&t){let e;for(q=s[1].results,e=0;e<q.length;e+=1){const n=G(s,q,e);w[e]?(w[e].p(n,t),l(w[e],1)):(w[e]=F(n),w[e].c(),l(w[e],1),w[e].m(c,null))}for(k(),e=q.length;e<w.length;e+=1)x(e);y()}},i(s){if(!v){for(let s=0;s<q.length;s+=1)l(w[s]);v=!0}},o(s){w=w.filter(Boolean);for(let t=0;t<w.length;t+=1)o(w[t]);v=!1},d(s){s&&m(t),s&&m(a),s&&m(c),I(w,s)}}}function F(s){let t,e;return t=new V({props:{post:s[4]}}),{c(){n(t.$$.fragment)},l(s){r(t.$$.fragment,s)},m(s,n){a(t,s,n),e=!0},p(s,e){const n={};2&e&&(n.post=s[4]),t.$set(n)},i(s){e||(l(t.$$.fragment,s),e=!0)},o(s){o(t.$$.fragment,s),e=!1},d(s){c(t,s)}}}function H(s){let t,e;return{c(){t=i("p"),e=z("Searching..."),this.h()},l(s){t=f(s,"P",{class:!0});var n=h(t);e=P(n,"Searching..."),n.forEach(m),this.h()},h(){g(t,"class","info svelte-1s1s01z")},m(s,n){$(s,t,n),d(t,e)},p:S,i:S,o:S,d(s){s&&m(t)}}}function J(s){let t,e,v,k,y,q,z;function P(t){s[3](t)}let S={};void 0!==s[0]&&(S.query=s[0]),v=new M({props:S}),w.push((()=>x(v,"query",P)));let j={ctx:s,current:null,token:null,hasCatch:!0,pending:H,then:O,catch:L,value:1,blocks:[,,,]};return b(q=s[1],j),{c(){t=i("main"),e=i("div"),n(v.$$.fragment),y=u(),j.block.c(),this.h()},l(s){t=f(s,"MAIN",{class:!0});var n=h(t);e=f(n,"DIV",{class:!0});var a=h(e);r(v.$$.fragment,a),a.forEach(m),y=p(n),j.block.l(n),n.forEach(m),this.h()},h(){g(e,"class","search svelte-1s1s01z"),g(t,"class","svelte-1s1s01z")},m(s,n){$(s,t,n),d(t,e),a(v,e,null),d(t,y),j.block.m(t,j.anchor=null),j.mount=()=>t,j.anchor=null,z=!0},p(t,[e]){s=t;const n={};if(!k&&1&e&&(k=!0,n.query=s[0],E((()=>k=!1))),v.$set(n),j.ctx=s,2&e&&q!==(q=s[1])&&b(q,j));else{const t=s.slice();t[1]=j.resolved,j.block.p(t,e)}},i(s){z||(l(v.$$.fragment,s),l(j.block),z=!0)},o(s){o(v.$$.fragment,s);for(let t=0;t<3;t+=1){const s=j.blocks[t];o(s)}z=!1},d(s){s&&m(t),c(v),j.block.d(),j.token=null,j=null}}}var K=function(s,t,e,n){return new(e||(e=Promise))((function(r,a){function l(s){try{c(n.next(s))}catch(t){a(t)}}function o(s){try{c(n.throw(s))}catch(t){a(t)}}function c(s){var t;s.done?r(s.value):(t=s.value,t instanceof e?t:new e((function(s){s(t)}))).then(l,o)}c((n=n.apply(s,t||[])).next())}))};function Q({page:s}){return K(this,void 0,void 0,(function*(){return{props:{page:s.params.page,query:s.query.get("q")}}}))}function R(s,t,e){let{page:n=1}=t,{query:r=""}=t,a=new Promise((()=>{}));return q((()=>{e(1,a=D(n,r))})),s.$$set=s=>{"page"in s&&e(2,n=s.page),"query"in s&&e(0,r=s.query)},[r,a,n,function(s){r=s,e(0,r)}]}export default class extends s{constructor(s){super(),t(this,s,R,J,e,{page:2,query:0})}}export{Q as load};
